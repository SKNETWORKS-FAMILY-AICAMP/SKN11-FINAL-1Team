{% extends 'base.html' %}
{% load static %}

{% block title %}ë¬¸ì„œ ì—…ë¡œë“œ{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/common/doc.css' %}">
{% endblock %}

{% block content %}
<div class="doc-container">
  <div class="doc-left">
    <div class="doc-title">ë¬¸ì„œ ì—…ë¡œë“œ</div>

    <!-- ë¬¸ì„œ ì—…ë¡œë“œ ë°•ìŠ¤ -->
    <div class="doc-upload-box">
      <!-- ë…¸ë€ìƒ‰ ì¹´í…Œê³ ë¦¬ íƒ­ ë²„íŠ¼ ì œê±°ë¨ -->

      <!-- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­ -->
      <div class="doc-drop-area" id="doc-drop-area">
        í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ì—¬ê¸°ë¡œ ëŒì–´ì˜¤ì„¸ìš”
      </div>
      <input type="file" id="doc-file-input" multiple accept=".pdf,.doc,.docx,.txt,.hwp,.jpg,.png,.ppt,.pptx,.xls,.xlsx"
        style="display: none;">

      <!-- ì¶”ê°€ëœ íŒŒì¼ ëª©ë¡ -->
      <div class="doc-upload-list" id="doc-upload-list">
        <table class="doc-upload-list-table">
          <thead>
            <tr>
              <th>íŒŒì¼ëª…</th>
              <th>ì„¤ëª…</th>
              <th>ë¶„ë¥˜(íƒœê·¸)</th>
              <th>ê³µí†µë¬¸ì„œ</th>
              <th>ì œê±°</th>
            </tr>
          </thead>
          <tbody id="doc-upload-list-tbody">
            <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
          </tbody>
        </table>
      </div>

      <button class="doc-upload-btn" id="doc-upload-btn">ì—…ë¡œë“œ</button>
    </div>

    <!-- ë“±ë¡ëœ íŒŒì¼ ëª©ë¡ -->
    <div class="doc-file-list">
      <div class="doc-title">ë“±ë¡ëœ íŒŒì¼ ëª©ë¡</div>
      <table class="doc-file-list-table">
        <thead>
          <tr>
            <th>íŒŒì¼ëª…</th>
            <th>ì„¤ëª…</th>
            <th>ë¶„ë¥˜(íƒœê·¸)</th>
            <th>ê´€ë¦¬ë¶€ì„œ</th>
            <th>ê´€ë¦¬</th>
          </tr>
        </thead>
        <tbody>
          {% for doc in core_docs %}
          <tr data-doc-id="{{ doc.docs_id }}">
            <td>
              <!-- íŒŒì¼ëª…ì„ ë‹¤ìš´ë¡œë“œ ë§í¬ë¡œ ë³€ê²½ -->
              <a href="/common/doc/{{ doc.docs_id }}/download/" class="doc-download-link" title="í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ"
                target="_blank">
                ğŸ“„ {{ doc.title }}
              </a>
            </td>
            <td>{{ doc.description|default:"-" }}</td>
            <td>-</td>
            <td>
              {% if doc.department %}{{ doc.department.department_name }}{% else %}-{% endif %}
            </td>
            <td>
              {% if user.department and doc.department and user.department.pk == doc.department.pk %}
              <button class="doc-edit-btn" onclick="editDoc({{ doc.docs_id }})">ìˆ˜ì •</button>
              <button class="doc-delete-btn" onclick="deleteDoc({{ doc.docs_id }})">ì‚­ì œ</button>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" style="text-align: center; padding: 40px;">ë“±ë¡ëœ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
<div class="modal-overlay" id="deleteModal" style="display: none;">
  <div class="modal-content">
    <h3>ë¬¸ì„œ ì‚­ì œ</h3>
    <p>ì´ ë¬¸ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>ì‚­ì œëœ ë¬¸ì„œëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
    <div class="modal-buttons">
      <button class="modal-btn cancel" onclick="closeDeleteModal()">ì·¨ì†Œ</button>
      <button class="modal-btn confirm" onclick="confirmDelete()">ì‚­ì œ</button>
    </div>
  </div>
</div>

<script src="{% static 'js/common/doc.js' %}"></script>
{% endblock %}