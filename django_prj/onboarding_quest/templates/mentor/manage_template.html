{% extends 'base.html' %}
{% load static %}

{% block title %}커리큘럼 관리{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/mentor/manage_template.css' %}">
{% endblock %}

{% block content %}
<div class="template-container">
  <!-- 왼쪽: 커리큘럼 리스트 + 생성 버튼 -->
  <div class="template-left">
    <div class="template-list-row">
      <span class="template-title">커리큘럼 목록</span>
      <button class="add-template-btn">커리큘럼 생성</button>
    </div>
    <div class="template-list" id="template-list">
      {% for curriculum in curriculums %}
        <div class="template-item {% if forloop.first %}selected{% endif %}"
             data-id="{{ curriculum.curriculum_id }}"
             data-common="{{ curriculum.common }}"
             data-title="{{ curriculum.curriculum_title|escapejs }}"
             data-desc="{{ curriculum.curriculum_description|default:''|escapejs }}"
             data-weeks="{{ curriculum.week_schedule|default:''|escapejs }}">
          {% if curriculum.common %}
            <span class="common-badge">[공용]</span>
          {% endif %}
          {{ curriculum.curriculum_title }}
        </div>
      {% empty %}
        <div class="no-curricula">표시할 커리큘럼이 없습니다.</div>
      {% endfor %}
    </div>
  </div>
  
  <!-- 오른쪽: 상세 정보 -->
  <div class="template-right">
    <div class="template-detail-header">
      <div class="template-detail-header-buttons">
        <button class="template-btn">복제</button>
        <button class="template-btn">삭제</button>
        <button class="template-edit-btn">커리큘럼 편집</button>
      </div>
    </div>
    
    <div id="curriculum-detail">
      <!-- JavaScript로 동적 렌더링 -->
    </div>
  </div>
</div>

<!-- 커리큘럼 작업 데이터를 JavaScript에 전달 -->
<script>
  // curriculumTasksData는 { [curriculum_id]: [ { week, title, guideline, description, period, priority, ... } ] } 형태여야 합니다.
  window.curriculumTasksData = {% if curriculum_tasks_json %}{{ curriculum_tasks_json|safe }}{% else %}{}{% endif %};
</script>
<script src="{% static 'js/mentor/manage_template.js' %}"></script>
{% endblock %}